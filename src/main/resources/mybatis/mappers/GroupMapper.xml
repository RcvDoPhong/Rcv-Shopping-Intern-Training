<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shopping.intern.mapper.GroupMapper">
    <!-- <resultMap id="UserResultMap" type="User">
        <id column="user_id" property="userId" jdbcType="BIGINT" />
        <result column="user_name" property="user_name" jdbcType="VARCHAR" />
        <result column="email" property="email" jdbcType="VARCHAR" />
        <result column="password" property="password" jdbcType="VARCHAR" />
        <result column="is_active" property="isActive" jdbcType="TINYINT" />
        <result column="is_delete" property="isDelete" jdbcType="TINYINT" />
        <result column="group_id" property="groupId" jdbcType="BIGINT" />
        <result column="updated_by" property="updatedBy" jdbcType="BIGINT" />
        <result column="created_at" property="createdAt" jdbcType="TIMESTAMP" />
        <result column="updated_at" property="updatedAt" jdbcType="TIMESTAMP" />
    </resultMap> -->
    <sql id="Base_Column_List">
        mst_groups.group_id, mst_groups.group_name, mst_groups.is_delete, mst_groups.created_at,
        mst_groups.updated_at, mst_groups.updated_by
    </sql>
    <select id="findAll" resultType="Group">
        SELECT <include refid="Base_Column_List" />, mst_users.user_name as updated_by_user
        FROM mst_groups
        LEFT JOIN mst_users ON mst_groups.updated_by = mst_users.user_id
        WHERE mst_groups.is_delete != 1
        <if test="paginate == true">
            LIMIT #{currentPage}, ${perPage}
        </if>
    </select>
    <select id="findById" resultType="Group">
        SELECT <include refid="Base_Column_List" />, mst_users.user_name as updated_by_user
        FROM mst_groups
        LEFT JOIN mst_users ON mst_groups.updated_by = mst_users.user_id
        WHERE mst_groups.group_id = #{groupid}
    </select>
    <update id="deleteById">
        UPDATE mst_users SET is_delete=1 WHERE user_id = #{user_id}
    </update>
</mapper>